<!DOCTYPE html>
<html lang="ne">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Q/A System | eLearning</title>
    <link rel="stylesheet" href="./section.css">
</head>

<body>

<!-- HEADER -->
<header class="header">
    <h2>ELearning</h2>
    <div class="profile">
        <span>Teacher</span>
        <button onclick="logout()">Logout</button>
    </div>
</header>

<div class="dashboard">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <ul>
            <li><a href="./teacherdb.html">Dashboard</a></li>
            <li><a href="./teacher_upload.html">Upload Notes</a></li>
            <li><a href="./quiz.html">Set MCQs</a></li>
            <li><a href="./blog.html">Blogs</a></li>
            <li ><a href="./section.html">Q/A Session</a></li>
            <li><a href="./live.html">Live Classes</a></li>
            <li><a href="./perinfo.html">Personal Info</a></li>
        </ul>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content">
        <div class="container">
            <h2>Student Q/A Section</h2>

            <!-- STUDENT PART -->
            <div class="section">
                <h3>Ask a Question</h3>
                <input type="text" id="studentQuestion" placeholder="Type your question here">
                <button onclick="addQuestion()">Submit Question</button>
            </div>

            <div class="section">
                <h3>Previous Questions</h3>
                <div id="questionsList"></div>
            </div>

            <!-- TEACHER PART -->
            <div class="section teacher">
                <h3>Teacher Panel</h3>
                <div id="teacherList"></div>
            </div>
        </div>
    </main>

</div>

<script>
    function logout() {
        alert("You have been logged out!");
        window.location.href = '../user/index.html';
    }

    let qaData = [];

    function addQuestion() {
        let questionBox = document.getElementById("studentQuestion");
        let questionText = questionBox.value;

        if (questionText === "") {
            alert("Write a question first!");
            return;
        }

        qaData.push({
            question: questionText,
            answer: ""
        });

        questionBox.value = "";
        showQuestions();
        showTeacherPanel();
    }

    function showQuestions() {
        let list = document.getElementById("questionsList");
        list.innerHTML = "";

        for (let i = 0; i < qaData.length; i++) {
            list.innerHTML += `<p class="question"><b>Q:</b> ${qaData[i].question}</p>`;

            if (qaData[i].answer !== "") {
                list.innerHTML += `<p class="answer"><b>Answer:</b> ${qaData[i].answer}</p>`;
            }
        }
    }

    function showTeacherPanel() {
        let list = document.getElementById("teacherList");
        list.innerHTML = "";

        for (let i = 0; i < qaData.length; i++) {
            list.innerHTML += `
                <div class="teacher-question">
                    <p><b>Q:</b> ${qaData[i].question}</p>
                    <textarea onblur="saveAnswer(${i}, this.value)" placeholder="Write answer here">${qaData[i].answer}</textarea>
                </div>
            `;
        }
    }

    function saveAnswer(index, answerText) {
        qaData[index].answer = answerText;
        showQuestions();
    }
</script>

</body>
</html>
